chrome.tabs.onActivated.addListener((function(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){e[0].url.includes("web.whatsapp.com")&&setTimeout((()=>{chrome.storage.local.get(["schedulerMessages"],(e=>{(e.schedulerMessages||[]).filter((e=>!e.messageSent&&!e.deleted&&e.repeatSending)).length>0&&chrome.tabs.query({url:"https://web.whatsapp.com/*"},(function(e){if(e.length>0){const t=e[0].id;chrome.tabs.reload(t)}}))}))}),1e4)}))})),chrome.runtime.onMessage.addListener(((e,t,n)=>{let r=e.data;if("get-html-file"===r.action)return function(e){return new Promise(((t,n)=>{const r=chrome.runtime.getURL(`html/${e}.html`);fetch(r).then((e=>e.text())).then((e=>{t(e)})).catch((e=>{n(e)}))}))}(r.fileName).then((e=>{n({data:e})})).catch((e=>{n({error:"Failed to fetch HTML file"})})),!0}));